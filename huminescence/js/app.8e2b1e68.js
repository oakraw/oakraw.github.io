(function(e){function t(t){for(var n,o,c=t[0],u=t[1],s=t[2],l=0,p=[];l<c.length;l++)o=c[l],a[o]&&p.push(a[o][0]),a[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);f&&f(t);while(p.length)p.shift()();return i.push.apply(i,s||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,c=1;c<r.length;c++){var u=r[c];0!==a[u]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var f=u;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var n=r("2b0e"),a=r("bb71");r("da64");n["a"].use(a["a"],{iconfont:"md"});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("router-view"),r("v-alert",{staticClass:"ma-0",staticStyle:{"z-index":"1000",position:"fixed",width:"100vw"},attrs:{value:e.errorMessage,type:"error",persistent:""}},[e._v("\n    "+e._s(e.errorMessage)+"\n  ")])],1)},o=[],c=(r("96cf"),r("3b8d")),u=r("cebc"),s=r("2f62"),f={name:"App",computed:Object(u["a"])({},Object(s["b"])(["errorMessage"])),data:function(){return{snackbar:!1}},created:function(){this.fetch()},methods:{fetch:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},l=f,p=r("2877"),h=r("6544"),d=r.n(h),v=r("0798"),g=r("7496"),m=Object(p["a"])(l,i,o,!1,null,null,null);m.options.__file="App.vue";var b=m.exports;d()(m,{VAlert:v["a"],VApp:g["a"]});var x=r("8c4f"),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"fill-height":""}},[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs4:""}},[r("v-card",{attrs:{ripple:""},on:{click:e.launchCamera}},[r("v-img",{attrs:{src:"https://www.techlicious.com/images/av/family-watching-movie-700px.jpg","aspect-ratio":"1"}}),r("v-card-title",[r("span",{staticClass:"title"},[e._v("Movie Experience")])])],1)],1)],1)],1)],1)},y=[],I={HOME:"home",REGISTER:"register",CAMERA:"camera"},_={created:function(){null===this.$store.getters.bridgeId&&this.$router.push({name:"register"})},methods:{launchCamera:function(){this.$router.push({name:I.CAMERA})}}},E=_,O=r("b0af"),R=r("12b2"),C=r("a523"),j=r("0e8f"),k=r("adda"),M=r("a722"),P=Object(p["a"])(E,w,y,!1,null,null,null);P.options.__file="Home.vue";var S=P.exports;d()(P,{VCard:O["a"],VCardTitle:R["a"],VContainer:C["a"],VFlex:j["a"],VImg:k["a"],VLayout:M["a"]});var D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"fill-height":""}},[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":""}},[e.bridgeIP?r("v-layout",{attrs:{"align-center":"",column:""}},[r("span",{staticClass:"title mb-3"},[e._v("Press the button on Philips Bridge.")]),e.bridgePairing?r("v-progress-circular",{staticClass:"text-sm-center",attrs:{indeterminate:"",color:"primary"}}):r("v-btn",{attrs:{color:"primary",large:"",dark:""},on:{click:e.pairBridge}},[e._v("\n        I already pressed it\n      ")]),e.error?r("span",{staticClass:"error--text mt-3"},[e._v(e._s(e.error))]):e._e()],1):r("h2",[e._v(e._s(e.findBridgeMessage))])],1)],1)},A=[],B="FIND_BRIDGE",V="BRIDGE_FOUND",G="CLEAR_BRIDGE",T="PAIR_BRIDGE",$="PAIRING_BRIDGE",L="PAIR_BRIDGE_SUCCESS",z="PAIR_BRIDGE_ERROR",H="GET_IP",U={computed:Object(u["a"])({},Object(s["b"])(["bridgeIP","bridgePairing"])),data:function(){return{error:null,findBridgeMessage:"finding bridge..."}},created:function(){this.fetch(),this.$store.dispatch(G)},methods:{fetch:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch(B);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),this.findBridgeMessage="Not found bridge";case 8:case"end":return e.stop()}},e,this,[[0,5]])}));function t(){return e.apply(this,arguments)}return t}(),pairBridge:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch(T);case 3:t=e.sent,t&&this.$router.push({name:I.HOME}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.error=e.t0;case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}()}},q=U,F=r("8336"),N=r("490a"),J=Object(p["a"])(q,D,A,!1,null,null,null);J.options.__file="Register.vue";var W=J.exports;d()(J,{VBtn:F["a"],VContainer:C["a"],VLayout:M["a"],VProgressCircular:N["a"]});var X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{style:{background:e.pickedColor},attrs:{"fill-height":"",row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("div",{staticClass:"demo-frame"},[r("div",{staticClass:"demo-container"},[r("video",{attrs:{id:"video",width:"100%",height:"450",autoplay:"",muted:"",controls:""},domProps:{muted:!0}}),r("canvas",{staticStyle:{display:"none"},attrs:{id:"canvas",width:"600",height:"400"}})])])]),r("v-flex",{attrs:{xs12:"","pa-4":""}},[e.cameras.length>0?r("v-select",{attrs:{items:e.cameras,"item-text":"name",label:"Camera",box:""},model:{value:e.selectedCamera,callback:function(t){e.selectedCamera=t},expression:"selectedCamera"}}):e._e()],1),r("v-flex",{attrs:{xs12:"","d-flex":""}},[r("v-btn",{attrs:{color:"primary",large:""},on:{click:e.init}},[e._v("\n      Start\n    ")])],1)],1)},K=[],Q=(r("ac6a"),r("6929")),Y=r.n(Q),Z=(r("55dd"),r("34ef"),function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=e.width,this.height=this.canvas.height=e.height,this.context.drawImage(e,0,0,this.width,this.height)});Z.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},Z.prototype.update=function(e){this.context.putImageData(e,0,0)},Z.prototype.getPixelCount=function(){return this.width*this.height},Z.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},Z.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var ee=function(){};
/*!
 * quantize.js Copyright 2008 Nick Rabinowitz.
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 * @license
 */
/*!
 * Block below copied from Protovis: http://mbostock.github.com/protovis/
 * Copyright 2010 Stanford Visualization Group
 * Licensed under the BSD License: http://www.opensource.org/licenses/bsd-license.php
 * @license
 */
if(ee.prototype.getColor=function(e,t){var r=this.getPalette(e,5,t),n=r[0];return n},ee.prototype.getPalette=function(e,t,r){("undefined"===typeof t||t<2||t>256)&&(t=10),("undefined"===typeof r||r<1)&&(r=10);for(var n,a,i,o,c,u=new Z(e),s=u.getImageData(),f=s.data,l=u.getPixelCount(),p=[],h=0;h<l;h+=r)n=4*h,a=f[n+0],i=f[n+1],o=f[n+2],c=f[n+3],c>=125&&(a>250&&i>250&&o>250||p.push([a,i,o]));var d=re.quantize(p,t),v=d?d.palette():null;return u.removeCanvas(),v},ee.prototype.getColorFromUrl=function(e,t,r){sourceImage=document.createElement("img");var n=this;sourceImage.addEventListener("load",function(){var a=n.getPalette(sourceImage,5,r),i=a[0];t(i,e)}),sourceImage.src=e},ee.prototype.getImageData=function(e,t){xhr=new XMLHttpRequest,xhr.open("GET",e,!0),xhr.responseType="arraybuffer",xhr.onload=function(e){if(200==this.status){uInt8Array=new Uint8Array(this.response),r=uInt8Array.length,binaryString=new Array(r);for(var r=0;r<uInt8Array.length;r++)binaryString[r]=String.fromCharCode(uInt8Array[r]);data=binaryString.join(""),base64=window.btoa(data),t("data:image/png;base64,"+base64)}},xhr.send()},ee.prototype.getColorAsync=function(e,t,r){var n=this;this.getImageData(e,function(e){sourceImage=document.createElement("img"),sourceImage.addEventListener("load",function(){var e=n.getPalette(sourceImage,5,r),a=e[0];t(a,this)}),sourceImage.src=e})},!te)var te={map:function(e,t){var r={};return t?e.map(function(e,n){return r.index=n,t.call(r,e)}):e.slice()},naturalOrder:function(e,t){return e<t?-1:e>t?1:0},sum:function(e,t){var r={};return e.reduce(t?function(e,n,a){return r.index=a,e+t.call(r,n)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?te.map(e,t):e)}};var re=function(){var e=5,t=8-e,r=1e3,n=.75;function a(t,r,n){return(t<<2*e)+(r<<e)+n}function i(e){var t=[],r=!1;function n(){t.sort(e),r=!0}return{push:function(e){t.push(e),r=!1},peek:function(e){return r||n(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return r||n(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return r||n(),t}}}function o(e,t,r,n,a,i,o){var c=this;c.r1=e,c.r2=t,c.g1=r,c.g2=n,c.b1=a,c.b2=i,c.histo=o}function c(){this.vboxes=new i(function(e,t){return te.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())})}function u(r){var n,i,o,c,u=1<<3*e,s=new Array(u);return r.forEach(function(e){i=e[0]>>t,o=e[1]>>t,c=e[2]>>t,n=a(i,o,c),s[n]=(s[n]||0)+1}),s}function s(e,r){var n,a,i,c=1e6,u=0,s=1e6,f=0,l=1e6,p=0;return e.forEach(function(e){n=e[0]>>t,a=e[1]>>t,i=e[2]>>t,n<c?c=n:n>u&&(u=n),a<s?s=a:a>f&&(f=a),i<l?l=i:i>p&&(p=i)}),new o(c,u,s,f,l,p,r)}function f(e,t){if(t.count()){var r=t.r2-t.r1+1,n=t.g2-t.g1+1,i=t.b2-t.b1+1,o=te.max([r,n,i]);if(1==t.count())return[t.copy()];var c,u,s,f,l,p=0,h=[],d=[];if(o==r)for(c=t.r1;c<=t.r2;c++){for(f=0,u=t.g1;u<=t.g2;u++)for(s=t.b1;s<=t.b2;s++)l=a(c,u,s),f+=e[l]||0;p+=f,h[c]=p}else if(o==n)for(c=t.g1;c<=t.g2;c++){for(f=0,u=t.r1;u<=t.r2;u++)for(s=t.b1;s<=t.b2;s++)l=a(u,c,s),f+=e[l]||0;p+=f,h[c]=p}else for(c=t.b1;c<=t.b2;c++){for(f=0,u=t.r1;u<=t.r2;u++)for(s=t.g1;s<=t.g2;s++)l=a(u,s,c),f+=e[l]||0;p+=f,h[c]=p}return h.forEach(function(e,t){d[t]=p-e}),v(o==r?"r":o==n?"g":"b")}function v(e){var r,n,a,i,o,u=e+"1",s=e+"2",f=0;for(c=t[u];c<=t[s];c++)if(h[c]>p/2){a=t.copy(),i=t.copy(),r=c-t[u],n=t[s]-c,o=r<=n?Math.min(t[s]-1,~~(c+n/2)):Math.max(t[u],~~(c-1-r/2));while(!h[o])o++;f=d[o];while(!f&&h[o-1])f=d[--o];return a[s]=o,i[u]=a[s]+1,[a,i]}}}function l(e,t){if(!e.length||t<2||t>256)return!1;var a=u(e);a.forEach(function(){0});var o=s(e,a),l=new i(function(e,t){return te.naturalOrder(e.count(),t.count())});function p(e,t){var n,i=1,o=0;while(o<r)if(n=e.pop(),n.count()){var c=f(a,n),u=c[0],s=c[1];if(!u)return;if(e.push(u),s&&(e.push(s),i++),i>=t)return;if(o++>r)return}else e.push(n),o++}l.push(o),p(l,n*t);var h=new i(function(e,t){return te.naturalOrder(e.count()*e.volume(),t.count()*t.volume())});while(l.size())h.push(l.pop());p(h,t-h.size());var d=new c;while(h.size())d.push(h.pop());return d}return o.prototype={volume:function(e){var t=this;return t._volume&&!e||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(e){var t=this,r=t.histo;if(!t._count_set||e){var n,i,o,c,u=0;for(i=t.r1;i<=t.r2;i++)for(o=t.g1;o<=t.g2;o++)for(c=t.b1;c<=t.b2;c++)n=a(i,o,c),u+=r[n]||0;t._count=u,t._count_set=!0}return t._count},copy:function(){var e=this;return new o(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var r=this,n=r.histo;if(!r._avg||t){var i,o,c,u,s,f=0,l=1<<8-e,p=0,h=0,d=0;for(o=r.r1;o<=r.r2;o++)for(c=r.g1;c<=r.g2;c++)for(u=r.b1;u<=r.b2;u++)s=a(o,c,u),i=n[s]||0,f+=i,p+=i*(o+.5)*l,h+=i*(c+.5)*l,d+=i*(u+.5)*l;r._avg=f?[~~(p/f),~~(h/f),~~(d/f)]:[~~(l*(r.r1+r.r2+1)/2),~~(l*(r.g1+r.g2+1)/2),~~(l*(r.b1+r.b2+1)/2)]}return r._avg},contains:function(e){var r=this,n=e[0]>>t;return gval=e[1]>>t,bval=e[2]>>t,n>=r.r1&&n<=r.r2&&gval>=r.g1&&gval<=r.g2&&bval>=r.b1&&bval<=r.b2}},c.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map(function(e){return e.color})},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,r=0;r<t.size();r++)if(t.peek(r).vbox.contains(e))return t.peek(r).color;return this.nearest(e)},nearest:function(e){for(var t,r,n,a=this.vboxes,i=0;i<a.size();i++)r=Math.sqrt(Math.pow(e[0]-a.peek(i).color[0],2)+Math.pow(e[1]-a.peek(i).color[1],2)+Math.pow(e[2]-a.peek(i).color[2],2)),(r<t||void 0===t)&&(t=r,n=a.peek(i).color);return n},forcebw:function(){var e=this.vboxes;e.sort(function(e,t){return te.naturalOrder(te.sum(e.color),te.sum(t.color))});var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var r=e.length-1,n=e[r].color;n[0]>251&&n[1]>251&&n[2]>251&&(e[r].color=[255,255,255])}},{quantize:l}}(),ne=ee,ae="SHOW_ERROR",ie="HIDE_ERROR",oe="GET_DEVICES",ce="GET_DEVICES_SUCCESS",ue="CHANGE_DEVICES_COLOR",se=null,fe=null,le=null,pe=0,he=[-999,-999];function de(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92}function ve(e,t,r){var n=e/255,a=t/255,i=r/255,o=de(n),c=de(a),u=de(i),s=.649926*o+.103455*c+.197109*u,f=.234327*o+.743075*c+.022598*u,l=0*o+.053077*c+1.035763*u;if(s+f+l===0)return[0,0];var p=s/(s+f+l),h=f/(s+f+l);return[p,h]}var ge={data:function(){return{currentStream:null,selectedCamera:null,cameras:[],pickedColor:""}},created:function(){var e=this;navigator.mediaDevices.enumerateDevices().then(function(t){t.forEach(function(t){var r=t;"videoinput"===r.kind&&e.cameras.push(r)}),e.cameras.forEach(function(e,t){var r=e;r.name=r.label||"camera ".concat(t+1)}),e.cameras.length>0&&(e.selectedCamera=e.cameras[0]),console.log(e.cameras)}),this.fetch()},methods:{init:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:se=document.getElementById("video"),fe=document.getElementById("canvas"),le=fe.getContext("2d"),this.stopMediaTracks(),t={},""===this.selectedCamera.deviceId?t.facingMode="environment":t.deviceId={exact:this.selectedCamera.deviceId},r={video:t,audio:!1},navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(r).then(function(e){n.currentStream=e,se.srcObject=e,se.addEventListener("timeupdate",n.frameProcess),se.play()}):this.$store.dispatch(ae,"Camera not support");case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),fetch:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch(oe);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),stopMediaTracks:function(){this.currentStream&&this.currentStream.getTracks().forEach(function(e){e.stop()})},frameProcess:function(){if(pe+=1,pe%5===0){le.drawImage(se,0,0,fe.width,fe.height);var e=new ne,t=e.getColor(fe);this.pickedColor=Y.a.rgb(t),this.command()}},command:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=Y.a.rgb(this.pickedColor).color,r=ve(t[0],t[1],t[2]),(Math.abs(he[0]-r[0])>.002||Math.abs(he[1]-r[1])>.002)&&(he=r,this.$store.dispatch(ue,{on:!0,bri:254,xy:r}));case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},me=ge,be=r("b56d"),xe=Object(p["a"])(me,X,K,!1,null,null,null);xe.options.__file="Camera.vue";var we=xe.exports;d()(xe,{VBtn:F["a"],VFlex:j["a"],VLayout:M["a"],VSelect:be["a"]});var ye=r("bd86"),Ie=r("795b"),_e=r.n(Ie),Ee=(r("6762"),r("2fdb"),r("bc3a")),Oe=r.n(Ee),Re=r("a7fe"),Ce=r.n(Re),je="https://discovery.meethue.com/";function ke(e){n["a"].axios.defaults.baseURL=e}var Me,Pe,Se,De,Ae,Be={init:function(){n["a"].use(Ce.a,Oe.a),n["a"].axios.interceptors.request.use(this.interceptRequest,function(e){return _e.a.reject(e)})},setEndpointForfindIP:function(){ke(je)},setIPEndpoint:function(e){ke("https://vesper.serveo.net/bridge?url=".concat(e,"/api/"))},get:function(e,t){return n["a"].axios.get(e,t)},post:function(e,t,r){return n["a"].axios.post(e,t,r)},patch:function(e,t){return n["a"].axios.patch("".concat(e),t)},put:function(e,t){return n["a"].axios.put("".concat(e),t)},delete:function(e,t){return n["a"].axios.delete("".concat(e),t)},interceptRequest:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t,!t.url||t.url.includes(je)){e.next=13;break}return e.prev=2,e.next=5,ot.dispatch(H);case 5:n=e.sent,a="https://vesper.serveo.net/bridge?url=".concat(n,"/api/"),r.url="".concat(a).concat(r.url),e.next=13;break;case 10:return e.prev=10,e.t0=e["catch"](2),e.abrupt("return",_e.a.reject(e.t0));case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this,[[2,10]])}));function t(t){return e.apply(this,arguments)}return t}()},Ve=Be,Ge={findBridge:function(){return Ve.setEndpointForfindIP(),Ve.get().then(function(e){return e.data})},getBridgeId:function(){return Ve.post("",{devicetype:"my_hue_app#vue"}).then(function(e){return e.data})}},Te=Ge,$e={getDevices:function(e){return Ve.get("".concat(e,"/lights")).then(function(e){return e.data})},commandLight:function(e,t,r){return Ve.put("".concat(e,"/lights/").concat(t,"/state"),r).then(function(e){return e.data})}},Le=$e,ze="BRIDGE_ID",He={bridgeId:localStorage.getItem(ze)||null,pairing:!1,bridgeIP:null,finding:!1},Ue={finding:function(e){return e.finding},bridgeId:function(e){return e.bridgeId},bridgeIP:function(e){return e.bridgeIP},bridgePairing:function(e){return e.pairing}},qe=function(e){localStorage.setItem(ze,e)},Fe=(Me={},Object(ye["a"])(Me,B,function(e){var t=e.commit;return t(B),new _e.a(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(r,n){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.findBridge();case 3:a=e.sent,a.length>0?(i=a[0].internalipaddress,Ve.setIPEndpoint(i),t(V,i),r(i)):n(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),n(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,r){return e.apply(this,arguments)}}())}),Object(ye["a"])(Me,T,function(e){var t=e.commit;return t($),new _e.a(function(e,r){return Te.getBridgeId().then(function(n){if(n.length>0){var a=n[0];if(a.success){var i=a.success.username;qe(i),t(L,i)}else t(z),r(a.error.description)}e(n)}).catch(function(e){t(z),r(e)})})}),Object(ye["a"])(Me,G,function(e){var t=e.commit;t(G),qe(null)}),Object(ye["a"])(Me,H,function(e){var t=e.dispatch;return new _e.a(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(r,n){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!He.bridgeIP){e.next=4;break}r(He.bridgeIP),e.next=14;break;case 4:return e.prev=4,e.next=7,t(B);case 7:a=e.sent,r(a),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),n(e.t0);case 14:case"end":return e.stop()}},e,this,[[4,11]])}));return function(t,r){return e.apply(this,arguments)}}())}),Me),Ne=(Pe={},Object(ye["a"])(Pe,B,function(e){e.finding=!0}),Object(ye["a"])(Pe,V,function(e,t){e.finding=!1,e.bridgeIP=t}),Object(ye["a"])(Pe,G,function(e){e.bridgeId=null}),Object(ye["a"])(Pe,$,function(e){e.pairing=!0}),Object(ye["a"])(Pe,L,function(e,t){e.pairing=!1,e.bridgeId=t}),Object(ye["a"])(Pe,z,function(e){e.pairing=!1}),Pe),Je={state:He,getters:Ue,actions:Fe,mutations:Ne},We=(r("5df3"),{devices:[]}),Xe={devices:function(e){return e.devices}},Ke=function(){return Je.state.bridgeId},Qe=(Se={},Object(ye["a"])(Se,oe,function(e){var t=e.commit;return t(oe),new _e.a(function(e){Le.getDevices(Ke()).then(function(r){t(ce,r),e(r)})})}),Object(ye["a"])(Se,ue,function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dispatch,0!==We.devices.length){e.next=4;break}return e.next=4,n(oe);case 4:for(o in a=[],i=function(e){a.push(new _e.a(function(t){Le.commandLight(Ke(),e,r).then(function(e){t(e)})}))},We.devices)i(o);return e.abrupt("return",_e.a.all(a));case 8:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()),Se),Ye=(De={},Object(ye["a"])(De,oe,function(){}),Object(ye["a"])(De,ce,function(e,t){e.devices=t}),De),Ze={state:We,getters:Xe,actions:Qe,mutations:Ye},et={errorMessage:""},tt={errorMessage:function(e){return e.errorMessage}},rt=Object(ye["a"])({},ae,function(e,t){var r=e.commit;r(ae,t),setTimeout(function(){r(ie)},3e3)}),nt=(Ae={},Object(ye["a"])(Ae,ae,function(e,t){e.errorMessage=t}),Object(ye["a"])(Ae,ie,function(e){e.errorMessage=""}),Ae),at={state:et,getters:tt,actions:rt,mutations:nt};n["a"].use(s["a"]);var it=!1,ot=new s["a"].Store({modules:{bridge:Je,control:Ze,ui:at},strict:it}),ct=function(e,t,r){r()};n["a"].use(x["a"]);var ut=new x["a"]({routes:[{path:"/",name:I.HOME,component:S,beforeEnter:ct},{path:"/register",name:I.REGISTER,component:W},{path:"/movie",name:I.CAMERA,component:we,beforeEnter:ct}]});n["a"].config.productionTip=!1,Ve.init(),new n["a"]({router:ut,store:ot,render:function(e){return e(b)}}).$mount("#app")}});
//# sourceMappingURL=app.8e2b1e68.js.map